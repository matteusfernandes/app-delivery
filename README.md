# Reposit√≥rio do projeto App de Delivery!
#### :rocket: Bloco 31 - Aplica√ß√£o de todos os conceitos aprendidos nos M√≥dulos de Front-end e Back-end do curso de Web Developer da Trybe.

## Contexto
A distribuidora de cervejas da dona Tereza est√° se informatizando! üöÄ Seu neg√≥cio, antes focado em um local espec√≠fico da cidade, passou a receber uma quantidade massiva de encomendas de outros pontos, expandindo sua atua√ß√£o, sobretudo via delivery. Isso tudo gra√ßas ao excelente pre√ßo das bebidas e atendimento da equipe de vendas.

Agora a distribuidora possui alguns pontos de venda na cidade para agilizar no atendimento dessas √°reas. Cada ponto de venda, por sua vez, possui uma pessoa vendedora respons√°vel.

Como seu antigo sistema, que era um conjunto de planilhas, j√° n√£o atende a necessidade do neg√≥cio, pois gera muita manuten√ß√£o, dona Tereza procurou a sua equipe de pessoas desenvolvedoras com uma ideia de aplicativo que pudesse agilizar a vida de sua equipe e das pessoas que compram seus produtos. O aplicativo precisa:
- Ter acesso via login: tanto clientes como pessoas vendedoras, assim como a pr√≥pria dona Tereza, que administra o sistema, devem ter acesso ao aplicativo via login, por√©m para fun√ß√µes diferentes: (1) A pessoa cliente, que compra da lista de produtos; (2) A pessoa vendedora, que aprova, prepara e entrega; (3) A pessoa administradora, que gerencia quem usa o aplicativo;

- Fazer a comunica√ß√£o entre clientes e pessoas vendedoras: a pessoa cliente faz o pedido via "carrinho de compras" e a pessoa vendedora aprova, prepara e envia esse pedido. Quando o produto √© recebido por quem comprou, essa pessoa marca o pedido como "recebido". Ambos devem possuir detalhes sobre seus pedidos;

- Funcionar em tempo real: as telas de pedidos/detalhes do pedido devem ser atualizadas em tempo real, √† medida que essas intera√ß√µes acontecem. Se a pessoa cliente faz o pedido, o mesmo deve aparecer para a pessoa vendedora em seu dash de pedidos sem que ela precise atualizar a p√°gina. A pessoa cliente, por sua vez, deve ter as informa√ß√µes sobre seu pedido tamb√©m atualizadas em tempo real, ou seja, ter informa√ß√µes se o pedido est√° sendo preparado ou se j√° saiu pra entrega;

A ideia da sua equipe j√° pressup√µe alguma escalabilidade, dado que foram estabelecidas algumas entidades gen√©ricas no banco de dados e componentiza√ß√£o no front-end, para que, caso o sistema cres√ßa, n√£o seja muito dif√≠cil mudar e ampliar essa estrutura.

## Prot√≥tipo e Diagrama de ER
![image](https://user-images.githubusercontent.com/83843532/188521047-8b2a114d-993f-4c11-80e9-94f5b9a7c854.png)

## Habilidades Desenvolvidas
- Manter ader√™ncia do c√≥digo √† especifica√ß√£o. O programa deve se comportar como especificado no reposit√≥rio, no prot√≥tipo e no Diagrama de ER;
- Manter a organiza√ß√£o do c√≥digo e a arquitetura geral da aplica√ß√£o (tanto da API quando do front-end);
- Manter ader√™ncia ao padr√£o REST na API;
- Respeitar a estrutura do banco de dados. A implementa√ß√£o n√£o deve adicionar ou remover tabelas, campos ou relacionamentos e a API deve estar preparada para aproveitar essa estrutura por completo;
- Manter ader√™ncia aos princ√≠pios SOLID;

## Instru√ß√µes

1. Clone o reposit√≥rio
- `git clone git@github.com:matteusfernandes/app-delivery.git`
- Entre na pasta do reposit√≥rio que voc√™ acabou de clonar:
    - `cd app-delivery`

2. Instale as depend√™ncias e inicialize o projeto
- ‚ö†Ô∏è IMPORTANTE ‚ö†Ô∏è: Para testar o Projeto localmente, √© fundamental configurar o arquivo de vari√°veis de ambiente `.env` (de `environment`) dentro da pasta `./back-end` (ele √© o √∫nico `.env` no projeto), conforme exemplo em `.env.example`, na mesma pasta. Esse arquivo servir√° de refer√™ncia para o avaliador e caso n√£o exista, o avaliador vai utilizar valores `default` pro processo (O que pode estourar erro no teste local, caso suas configura√ß√µes n√£o sejam as mesmas).


- Excepcionalmente nesse projeto, tamb√©m existe a necessidade de manter e subir no reposit√≥rio o arquivo `jwt.evaluation.key`, que tamb√©m deve estar em `./back-end`. Esse arquivo deve conter √∫nica e exclusivamente **a chave utilizada para criptografia com JWT**. Nesse sentido, esse arquivo pode ser lido por sua aplica√ß√£o na hora de trabalhar com `tokens`.

- ‚ö†Ô∏è IMPORTANTE ‚ö†Ô∏è: Inicie o projeto pela raiz, utilizando o comando `npm i`;
    - Ap√≥s isso, √© poss√≠vel fazer a instala√ß√£o de ambos os aplicativos (back e front) atrav√©s da raiz do projeto, utilizando o comando `npm run dev:prestart` (esse comando tamb√©m restaurar√° o banco de dados, caso o `.env` esteja configurado corretamente).
    
- `npm start` (Limpa as portas `3000` e `3001`. Prepara o campo rodando o `Sequelize` para restaurar o banco de dados de testes `(final -test)` e sobe a aplica√ß√£o com `pm2` em modo `fork` (Uma inst√¢ncia pra cada aplica√ß√£o). Nesse modo as altera√ß√µes n√£o s√£o assistidas;)
      - uso (na raiz do projeto);

## Scripts relevantes do `package.json` principal

**S√£o os scripts da raiz do projeto (`./package.json`)** *(e n√£o das aplica√ß√µes individuais `./front-end/package.json` e `./back-end/package.json`)*:

- `start`: Limpa as portas `3000` e `3001` e simula a inicializa√ß√£o no avaliador. Prepara o campo rodando o `Sequelize` para restaurar o **banco de dados de testes** (final `-test`) e sobe a aplica√ß√£o com `pm2` em modo `fork` (Uma inst√¢ncia pra cada aplica√ß√£o). Nesse modo as altera√ß√µes n√£o s√£o assistidas;
  - *uso (na raiz do projeto): `npm start`*

- `stop`: Para e deleta as aplica√ß√µes rodando no `pm2`;
  - *uso (na raiz do projeto): `npm stop`*

- `dev`: Limpa as portas `3000` e `3001` e sobe a aplica√ß√£o com `pm2` em modo `fork` (Uma inst√¢ncia pra cada aplica√ß√£o), nesse modo, as atualiza√ß√µes s√£o assistidas (modo `watch`);
  - *uso (na raiz do projeto): `npm run dev`*

- `dev:prestart`: A partir da raiz, esse comando faz o processo de instala√ß√£o de depend√™ncias (`npm i`) nos dois projetos (`./front-end` e `./back-end`) e roda o `Sequelize` no `./back-end` (lembrar de configurar o `.env` no mesmo);
  - *uso (na raiz do projeto): `npm run dev:prestart`*

- `db:reset`: Rodas os scripts do `Sequelize` restaurando o **banco de dados de desenvolvimento** (final `-dev`), utilize caso ocorra algum problema no seu banco local;
  - *uso (na raiz do projeto): `npm run db:reset`*

- `db:reset:debug`: Rodas os scripts do `Sequelize` restaurando o **banco de dados de desenvolvimento** (final `-dev`), utilize caso ocorra algum problema no seu banco local; Esse comando tamb√©m √© capaz de retornar informa√ß√µes detalhadas de erros (quando ocorrerem no processo);
  - *uso (na raiz do projeto): `npm run db:reset:debug`*

- `test <nomes-dos-arquivos>`: Roda todos os testes (ou uma parte deles caso `<nomes-dos-arquivos>` seja definido) utilizando o **banco de dados de testes** (final `-test`);
  - *uso (na raiz do projeto): `npm test`, `npm test 01login 02register` ou ainda `npm run test 01 02`*

- `test:dev <nomes-dos-arquivos>`: Roda todos os testes (ou uma parte deles caso `<nomes-dos-arquivos>` seja definido) utilizando o **banco de dados de desenvolvimento** (final `-dev`); 
  - *uso (na raiz do projeto): `npm run test:dev`, `npm run test:dev 01login 02register` ou ainda `npm test:dev 01 02`*;

- `test:dev:open <nomes-dos-arquivos>`: Roda todos os testes (ou uma parte deles caso `<nomes-dos-arquivos>` seja definido) utilizando o **banco de dados de desenvolvimento** (final `-dev`), exemplo `npm test:dev:open 01login 02register` ou ainda `npm test:dev:open 01 02`; Esse teste deve mostrar abrir uma janela mostrando o comportamento das p√°ginas;
  - *uso (na raiz do projeto): `npm run test:dev:open`, `npm run test:dev:open 01login 02register` ou ainda `npm test:dev:open 01 02`*;

- `test:dev:report "<nomes-dos-arquivos>"`: Roda todos os testes (ou uma parte deles caso `"<nomes-dos-arquivos>"` seja definido) utilizando o **banco de dados de desenvolvimento** (final `-dev`); Esse teste devolve um output em texto com o resultado de todos os testes; Os `logs` s√£o gerados em `./__tests__/reports`.
  - *uso (na raiz do projeto): `npm run test:dev:report`, `npm run test:dev:report "01login 02register"` ou ainda `npm run test:dev:report "01 02"`*;

@trybe

## Desenvolvimento do Projeto
Esse projeto foi o mais desafiador do curso! Nessa aplica√ß√£o, meu time foi respons√°vel por criar e integrar tanto o back-end quanto o front-end!

O projeto em si foi super divertido de ser desenvolvido e serviu para solidificar dos os conhecimentos adquiridos ao longo do curso de Desenvolvimento Web! Como dado no contexto, foi criada uma plataforma de delivery de cerveja. üçª

Para facilitar o entendimento, a aplica√ß√£o foi dividada em ** 3 fluxos principais** e uma valida√ß√£o de status entre cliente e pessoa vendedora:

- **Fluxo Comum** que compreende: 
  - (1) Tela de Login; 
  - (2) Tela de Registro.

- **Fluxo do Cliente** que compreende: : 
  - (3) Tela de Produtos; 
  - (4) Tela de Checkout; 
  - (5) Tela de Pedidos; 
  - (6) Tela de Detalhes do Pedido.

- **Fluxo da Pessoa Vendedora** que compreende: 
  - (7) Tela de Pedidos; 
  - (8) Tela de Detalhes/Controle do Pedido.

Para o banco de dados,foi ultilizada a biblioteca ORM `Sequelize`, que fez interface com o `MySQL`!

## Linter

Foi usado o [ESLint](https://eslint.org/) para fazer a an√°lise est√°tica do c√≥digo.

Este projeto j√° vem com as depend√™ncias relacionadas ao _linter_ configuradas nos arquivos `package.json` nos seguintes caminhos:

- `app-deliveryp/back-end/package.json`
- `app-deliveryp/front-end/package.json`

Para poder rodar os `ESLint` basta executar o comando `npm install` dentro do projeto de forma individual, ou seja, precisa-se executar esse comando dentro da pasta `back-end` e tamb√©m na pasta `front-end` e depois `npm run lint` dentro de cada uma dessas pastas, assim voc√™ verifica as particularidades individualmente. Se a an√°lise do `ESLint` encontrar problemas no seu c√≥digo, tais problemas ser√£o mostrados no seu terminal. Se n√£o houver problema no seu c√≥digo, nada ser√° impresso no seu terminal.

Devido ao fato de as configura√ß√µes das regras do `ESLint` dos projetos de front e back **serem diferentes**, **√© preciso executar o `ESLint` em cada projeto**.

Voc√™ pode tamb√©m instalar o plugin do `ESLint` no `VSCode`, bastar ir em extensions e baixar o [plugin `ESLint`](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint).
  - **Dica**: Abra separadamente cada pasta do projeto (`back-end` e `front-end` em `VSCode`s separados, para tirar proveito do `ESLint` individual de cada projeto).

Foi ultilizado tamb√©m o [StyleLint](https://stylelint.io/) para fazer a an√°lise est√°tica do c√≥digo.

**O Stylelint √© aplic√°vel _APENAS_ no frontend**

Para poder rodar o `StyleLint` em um projeto basta executar o comando `npm install` dentro do projeto de front-end e depois `npm run lint:styles`.

## Equipe de desenvolvedores
- Ana Jacomassi

- Paulo Lima

- Tha√≠sa Medeiros Almeida

- Bruna Vottri

- [Matteus Fernandes](https://www.linkedin.com/in/matteusfernandes/)

<a href="https://github.com/Ana-Jacomassi">![avatar](https://images.weserv.nl/?url=avatars.githubusercontent.com/u/74548134?v=4&h=100&w=100&fit=cover&mask=circle&maxage=7d
)</a>
<a href="https://github.com/Paulynho-lima">![avatar](https://images.weserv.nl/?url=avatars.githubusercontent.com/u/79667710?v=4&h=100&w=100&fit=cover&mask=circle&maxage=7d
)</a>
<a href="https://github.com/ThaisaMA">![avatar](https://images.weserv.nl/?url=avatars.githubusercontent.com/u/82241130?v=4&h=100&w=100&fit=cover&mask=circle&maxage=7d
)</a>
<a href="https://github.com/bvottri">![avatar](https://images.weserv.nl/?url=avatars.githubusercontent.com/u/83843006?v=4&h=100&w=100&fit=cover&mask=circle&maxage=7d
)</a>
<a href="https://github.com/matteusfernandes">![avatar](https://images.weserv.nl/?url=avatars.githubusercontent.com/u/83843532?v=4&h=100&w=100&fit=cover&mask=circle&maxage=7d
)</a>

- Para visualizar o **Pull Request** original aberto no reposit√≥rio da Trybe e tomar nota da avalia√ß√£o e dos testes, acesse: [Group3](https://github.com/tryber/sd-013-c-project-delivery-app/pull/386)
